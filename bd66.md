首先，在加读锁时，判断读者数量，如果为1，说明自己是第一个读者，这时要加写锁。如果没有写者，加锁成功。如果有写者，那么需要等待写锁释放。

其次，加写锁时，就是直接锁write_mtx,如果没有其他任何读者或者写者，加锁成功；否则就等待write_mtx被释放。