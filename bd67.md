![](https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/b396d726-b75f-4a32-89a2-03a7b6e19f6f.jpg)

**预处理阶段**：处理以 # 开头的预处理命令；

处理源代码中的伪指令和一些特殊字符，并对一些相关的代码进行替换，源文件进过预处理后的结果扩展为 .i 。主要包括一下几个部分：

- 宏定义：#define...；

- 条件编译：#ifdef...；

- 头文件包括：#include...  #include...；

- 特殊字符：LINE、FILE... 。

**编译阶段**：翻译成汇编文件；检查语法并对代码进行优化，将文本文件 .i 翻译成 .s 文件，得到汇编语言程序。

**汇编阶段**：将汇编文件翻译成可重定位目标文件；将 .s 文件转换成机器语言指令也就是二进制代码，并将结果保存在目标文件 .o 中。

**链接阶段**：将可重定位目标文件和 printf.o 等单独预编译好的目标文件进行合并，得到最终的可执行目标文件。将所有的目标文件链接到一起形成可执行文件，分为动态链接和静态链接。

